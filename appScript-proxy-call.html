<script>
async function run(model, input) {
  const response = await fetch(
    `https://script.google.com/macros/s/AKfycbxqTmypjLgNyPBkAavpbTmHc34Qjx9JXju3CwRpJI1hSIo9QIns0vBMJbhi1APAalyE/exec`,
    {
      headers: { Authorization: "Bearer vulOtiSL6N8Vrrsxc-wP_L_C8uFk4S8zTlT4osQx" },
      method: "POST",
      body: JSON.stringify(input),
    }
  );
  const result = await response.json();
  return result;
}


run("@cf/meta/llama-3-8b-instruct", {
  messages: [
    {
      role: "system",
      content: "You are a friendly assistan that helps write stories",
    },
    {
      role: "user",
      content:
        "Write a short story about a llama that goes on a journey to find an orange cloud",
    },
  ],
}).then((response) => {
  console.log(JSON.stringify(response));
});
</script>